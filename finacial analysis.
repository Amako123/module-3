

import csv
import os

# Input CSV file path
csv_path = "/Users/jennyposso/Downloads/module 3/PyBank/Resources/budget_data.csv"

# Output file path
output_file_path = "/Users/jennyposso/Downloads/module 3/Finance.txt"

# Read and process the CSV file
with open(csv_path, 'r') as csvfile:
    csvreader = csv.DictReader(csvfile)
    data = list(csvreader)

# Calculate financial analysis
total_months = len(data)
total_profit_losses = sum(int(row['Profit/Losses']) for row in data)

# Calculate changes in profit/losses
changes = [int(data[i]['Profit/Losses']) - int(data[i - 1]['Profit/Losses']) for i in range(1, total_months)]
average_change = sum(changes) / len(changes)

# Find greatest increase and decrease
greatest_increase = max(changes)
greatest_decrease = min(changes)

# Find corresponding months for greatest increase and decrease
increase_month = data[changes.index(greatest_increase) + 1]['Date']
decrease_month = data[changes.index(greatest_decrease) + 1]['Date']

# Write financial analysis results to a text file
with open(output_file_path, 'w') as txt_file:
    txt_file.write("Finance\n")
    txt_file.write("----------------------------\n")
    txt_file.write(f"Total Months: {total_months}\n")
    txt_file.write(f"Total: ${total_profit_losses}\n")
    txt_file.write(f"Average Change: ${average_change:.2f}\n")
    txt_file.write(f"Greatest Increase in Profits: {increase_month} (${greatest_increase})\n")
    txt_file.write(f"Greatest Decrease in Profits: {decrease_month} (${greatest_decrease})\n")

# Print the file path where the results are saved
print(f"Financial analysis results have been saved to '{output_file_path}'")
